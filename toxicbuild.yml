TESTS: &TESTS
  name: 'Tests'
  command: sh ./build-scripts/check_coverage.sh


FLAKE8: &FLAKE8
  name: 'Flake8'
  command: sh ./build-scripts/check_style.sh

APT_INSTALL:  &APT_INSTALL
  name: apt-install
  packages:
    - rabbitmq-server


language: python
versions:
  - '3.5'
  - '3.6'
  - '3.7'

branches:
  - master

plugins:
  - name: python-venv
    pyversion: python3.5

  - name: apt-install
    packages:
      - rabbitmq-serve

steps:
  - <<: *TESTS
  - <<: *FLAKE8
